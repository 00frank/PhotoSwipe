// PhotoSwipe - http://www.photoswipe.com/
// Copyright (c) 2011 by Code Computerlove (http://www.codecomputerlove.com)
// Licensed under the MIT license
// version: 1.0.0.111

(function(){if(!Function.prototype.bind){Function.prototype.bind=function(obj){var slice=[].slice,args=slice.call(arguments,1),self=this,nop=function(){},bound=function(){return self.apply(this instanceof nop?this:(obj||{}),args.concat(slice.call(arguments)));};nop.prototype=self.prototype;bound.prototype=new nop();return bound;};}
if(typeof Code==="undefined"){Code={};Code.PhotoSwipe={};}
Code.PhotoSwipe.Util={browser:{version:(navigator.userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],webkit:/webkit/.test(navigator.userAgent),opera:/opera/.test(navigator.userAgent),msie:/msie/.test(navigator.userAgent)&&!/opera/.test(navigator.userAgent),mozilla:/mozilla/.test(navigator.userAgent)&&!/(compatible|webkit)/.test(navigator.userAgent),mobileSafari:/Mac OS X.*Mobile.*Safari/.test(navigator.userAgent)},setElementData:function(el,key,value){if(this.isNothing(el.UtilData)){el.UtilData={};}
el.UtilData[key]=value;},getElementData:function(el,key,defaultValue){if(typeof defaultValue==="undefined"){defaultValue=null;}
if(this.isNothing(el.UtilData)){return defaultValue;}
if(this.isNothing(el.UtilData[key])){return defaultValue;}
return el.UtilData[key];},removeElementData:function(el,key){delete el.UtilData[key];},coalesce:function(){var i;for(i=0;i<arguments.length;i++){if(!this.isNothing(arguments[i])){return arguments[i];}}
return null;},registerNamespace:function(){var args=arguments,obj=null,i,j;for(i=0;i<args.length;++i){var ns=args[i];var nsParts=ns.split(".");var root=nsParts[0];eval('if (typeof '+root+' == "undefined"){'+root+' = {};} obj = '+root+';');for(j=1;j<nsParts.length;++j){obj[nsParts[j]]=obj[nsParts[j]]||{};obj=obj[nsParts[j]];}}},extend:function(destination,source,overwriteProperties){if(this.isNothing(overwriteProperties)){overwriteProperties=true;}
if(destination&&source&&this.isObject(source)){for(var prop in source){if(overwriteProperties){destination[prop]=source[prop];}
else{if(typeof destination[prop]=="undefined"){destination[prop]=source[prop];}}}}},swapArrayElements:function(arr,i,j){var temp=arr[i];arr[i]=arr[j];arr[j]=temp;},isObject:function(obj){return typeof obj=="object";},isNothing:function(obj){if(typeof obj==="undefined"||obj===null){return true;}
return false;},isFunction:function(obj){return typeof obj=="function";},isArray:function(obj){return obj&&Code.PhotoSwipe.Util.isFunction(obj.pop);},isNumber:function(obj){return typeof obj=="number";},isString:function(obj){return typeof obj=="string";},trim:function(val){var re=new RegExp(/\s+?/);return val.replace(re,'');}};})();(function(Util){Util.extend(Util,{DOM:{resetTranslate:function(el){if(Util.browser.mobileSafari){Util.DOM.setStyle(el,'-webkit-transform','translate3d(0px,0px,0px)');}},createElement:function(type,attributes,content){var retval=document.createElement(type);for(var attribute in attributes){if(attributes.hasOwnProperty(attribute)){retval.setAttribute(attribute,attributes[attribute]);}}
retval.innerHTML=content||'';return retval;},appendChild:function(childEl,parentEl){parentEl.appendChild(childEl);},appendText:function(text,parentEl){var textNode=document.createTextNode(text);Util.DOM.appendChild(textNode,parentEl);},appendToBody:function(childEl){this.appendChild(childEl,document.body);},removeChild:function(childEl,parentEl){parentEl.removeChild(childEl);},removeChildren:function(parentEl){if(parentEl.hasChildNodes()){while(parentEl.childNodes.length>=1){parentEl.removeChild(parentEl.childNodes[parentEl.childNodes.length-1]);}}},hasAttribute:function(el,attributeName){return el.getAttribute(attributeName);},getAttribute:function(el,attributeName){if(!this.hasAttribute(el,attributeName)){return'';}
return el.getAttribute(attributeName);},setAttribute:function(el,attributeName,value){el.setAttribute(attributeName,value);},removeAttribute:function(el,attributeName){if(this.hasAttribute(el,attributeName)){el.removeAttribute(attributeName);}},addClass:function(el,className){var currentClassValue=Util.DOM.getAttribute(el,'class');var re=new RegExp('(?:^|\\s+)'+className+'(?:\\s+|$)');if(!re.test(currentClassValue)){if(currentClassValue!=''){currentClassValue=currentClassValue+' ';}
currentClassValue=currentClassValue+className;Util.DOM.setAttribute(el,'class',currentClassValue);}},removeClass:function(el,className){var currentClassValue=Util.DOM.getAttribute(el,'class');var re=new RegExp('(?:^|\\s+)'+className+'(?:\\s+|$)');if(re.test(currentClassValue)){currentClassValue=currentClassValue.replace(re,' ');Util.DOM.setAttribute(el,'class',currentClassValue);Util.DOM.removeClass(el,className);}
else{currentClassValue=Util.trim(currentClassValue);if(currentClassValue===''){Util.DOM.removeAttribute(el,'class');}
else{Util.DOM.setAttribute(el,'class',currentClassValue);}}},hasClass:function(el,className){var re=new RegExp('(?:^|\\s+)'+className+'(?:\\s+|$)');return re.test(Util.DOM.getAttribute(el,'class'));},setStyle:function(el,style,value){if(Util.isObject(style)){for(var propertyName in style){if(style.hasOwnProperty(propertyName)){el.style[propertyName]=style[propertyName];}}}
else{el.style[style]=value;}},getStyle:function(el,styleName){return window.getComputedStyle(el,'').getPropertyValue(styleName);},hide:function(el){Util.setElementData(el,'oldDisplayValue',Util.DOM.getStyle(el,'display'));Util.DOM.setStyle(el,'display','none');},show:function(el){if(Util.DOM.getStyle(el,'display')==='none'){var oldDisplayValue=Util.getElementData(el,'oldDisplayValue','block');if(oldDisplayValue==='none'){oldDisplayValue='block';}
Util.DOM.setStyle(el,'display',oldDisplayValue);}},width:function(el,value){if(!Util.isNothing(value)){if(Util.isNumber(value)){value=value+'px';}
el.style.width=value;}
return window.parseInt(window.getComputedStyle(el,'').getPropertyValue('width'));},outerWidth:function(el){return el.offsetWidth;},height:function(el,value){if(!Util.isNothing(value)){if(Util.isNumber(value)){value=value+'px';}
el.style.height=value;}
return window.parseInt(window.getComputedStyle(el,'').getPropertyValue('height'));},outerHeight:function(el){return el.offsetHeight;},documentWidth:function(){return Util.DOM.width(document.documentElement);},documentHeight:function(){return Math.round(Util.DOM.height(document.documentElement));},bodyWidth:function(){return Util.DOM.width(document.body);},bodyHeight:function(){return Util.DOM.height(document.body);},windowWidth:function(){return window.innerWidth;},windowHeight:function(){return window.innerHeight;},windowScrollLeft:function(){return window.pageXOffset;},windowScrollTop:function(){return window.pageYOffset;},addEventListener:function(el,type,listener){el.addEventListener(type,listener,false);},removeEventListener:function(el,type,listener){el.removeEventListener(type,listener,false);},getMousePosition:function(event){var retval={x:0,y:0}
if(event.pageX){retval.x=event.pageX;}
else if(event.clientX){retval.x=event.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);}
if(event.pageY){retval.y=event.pageY;}
else if(event.clientY){retval.y=event.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);}
return retval;},getTouchEvent:function(event){return event;}}});})(Code.PhotoSwipe.Util);(function(Util){Util.extend(Util,{Animation:{_applyTransitionDelay:100,_setTransition:function(el,property,duration,timingFunction,delay,callback){var
transitionPrefix=Util.Animation._getTransitionPrefix(),p=Util.coalesce(property,''),d=Util.coalesce(duration,''),t,de,c;if(Util.isFunction(timingFunction)){c=timingFunction;t='';de='';}
else{c=callback;t=Util.coalesce(timingFunction,'');de=Util.coalesce(delay,'');}
Util.DOM.setStyle(el,transitionPrefix+'Property',p);Util.DOM.setStyle(el,transitionPrefix+'Duration',d);Util.DOM.setStyle(el,transitionPrefix+'TimingFunction',t);Util.DOM.setStyle(el,transitionPrefix+'Delay',de);if(Util.isFunction(c)){window.setTimeout(function(){c(el);},Util.Animation._applyTransitionDelay);}},_setTransitionEndEventListener:function(el){Util.setElementData(el,'transitionEndEvent',function(e){var el=e.target;Util.DOM.removeEventListener(el,Util.Animation._getTransitionEndEventLabel(),Util.getElementData(el,'transitionEndEvent'));Util.removeElementData(el,'transitionEndEvent');var callback=Util.getElementData(el,'transitionEndCallback');Util.removeElementData(el,'transitionEndCallback');Util.Animation._removeTransitions(el);if(Util.isFunction(callback)){window.setTimeout(function(){callback(e);},Util.Animation._applyTransitionDelay);}});Util.DOM.addEventListener(el,Util.Animation._getTransitionEndEventLabel(),Util.getElementData(el,'transitionEndEvent'));},_removeTransitions:function(el){var transitionPrefix=Util.Animation._getTransitionPrefix();Util.DOM.setStyle(el,transitionPrefix+'Property','');Util.DOM.setStyle(el,transitionPrefix+'Duration','');Util.DOM.setStyle(el,transitionPrefix+'TimingFunction','');Util.DOM.setStyle(el,transitionPrefix+'Delay','');},_getTransitionEndEventLabel:function(){return(document.documentElement.style.WebkitTransition!==undefined)?"webkitTransitionEnd":"transitionend";},_getTransitionPrefix:function(){return(document.documentElement.style.WebkitTransition!==undefined)?"webkitTransition":(document.documentElement.style.MozTransition!==undefined)?"MozTransition":"transition";},stopFade:function(el){Util.DOM.removeEventListener(el,Util.Animation._getTransitionEndEventLabel(),Util.getElementData(el,'transitionEndEvent'));var transitionPrefix=Util.Animation._getTransitionPrefix();var currentOpacity=window.getComputedStyle(el,'').getPropertyValue('opacity');Util.Animation._removeTransitions(el);Util.DOM.setStyle(el,'opacity',currentOpacity);},fadeIn:function(el,opacity,duration,callback){opacity=Util.coalesce(opacity,1);duration=Util.coalesce(duration,500);Util.setElementData(el,'transitionEndCallback',callback);Util.Animation._setTransition(el,'opacity',duration+'ms',function(el){Util.Animation._setTransitionEndEventListener(el);Util.DOM.setStyle(el,'opacity',opacity);});},fadeOut:function(el,duration,callback){if(Util.isNothing(duration)){duration=500;}
Util.setElementData(el,'transitionEndCallback',callback);Util.Animation._setTransition(el,'opacity',duration+'ms',function(el){Util.Animation._setTransitionEndEventListener(el);Util.DOM.setStyle(el,'opacity',0);});},slideBy:function(el,xPos,yPos,duration,callback){if(Util.isNothing(duration)){duration=500;}
Util.setElementData(el,'transitionEndCallback',Util.Animation._onSlideByEnd);Util.setElementData(el,'slideByCallback',callback);Util.setElementData(el,'slideByXPos',xPos);Util.setElementData(el,'slideByYPos',yPos);Util.Animation._setTransition(el,'all',duration+'ms','ease-in',0,function(el){Util.Animation._setTransitionEndEventListener(el);var
xPos=Util.getElementData(el,'slideByXPos'),yPos=Util.getElementData(el,'slideByYPos');Util.removeElementData(el,'slideByXPos');Util.removeElementData(el,'slideByYPos');Util.DOM.setStyle(el,{webkitTransform:(Util.isMobileSafari)?'translate3d('+xPos+'px, '+yPos+'px, 0)':'translate('+xPos+'px, '+yPos+'px)',MozTransform:'translate('+xPos+'px, '+yPos+'px)',transform:'translate('+xPos+'px, '+yPos+'px)'});});},_onSlideByEnd:function(e){var
el=e.target,callback=Util.getElementData(el,'slideByCallback'),transform=Util.coalesce(el.style.webkitTransform,el.style.MozTransform,el.style.transform),transformExploded=transform.match(/\((.*?)\)/)[1].split(', '),transformedX=window.parseInt(transformExploded[0]),transformedY=window.parseInt(transformExploded[1]),domX=window.parseInt(Util.DOM.getStyle(el,'left')),domY=window.parseInt(Util.DOM.getStyle(el,'top'));Util.DOM.setStyle(el,{webkitTransform:'',MozTransform:'',transform:'',left:(domX+transformedX)+'px',top:(domY+transformedY)+'px'});Util.removeElementData(el,'slideByCallback');Util.removeElementData(el,'slideByXPos');Util.removeElementData(el,'slideByYPos');if(Util.isFunction(callback)){window.setTimeout(function(){callback(e);},Util.Animation._applyTransitionDelay);}}}});})(Code.PhotoSwipe.Util);(function(){Code.PhotoSwipe.EventClass=Class.extend({_listeners:null,init:function(){this._listeners={};},addEventListener:function(type,listener){if(typeof this._listeners[type]==='undefined'){this._listeners[type]=[];}
this._listeners[type].push(listener);},dispatchEvent:function(event){if(typeof event=="string"){event={type:event};}
if(!event.target){event.target=this;}
if(!event.type){throw new Error("Event object missing 'type' property.");}
if(this._listeners[event.type]instanceof Array){var listeners=this._listeners[event.type];for(var i=0,len=listeners.length;i<len;i++){listeners[i].call(this,event);}}},removeEventListener:function(type,listener){if(this._listeners[type]instanceof Array){var listeners=this._listeners[type];for(var i=0,len=listeners.length;i<len;i++){if(listeners[i]===listener){listeners.splice(i,1);break;}}}}});})();(function(Util){Code.PhotoSwipe.ElementClass=Code.PhotoSwipe.EventClass.extend({el:null,settings:null,isFading:null,fadeInHandler:null,fadeOutHandler:null,init:function(options){this._super();this.settings={opacity:1,fadeSpeed:500};Util.extend(this.settings,options);this.isFading=false;this.fadeInHandler=this.postFadeIn.bind(this);this.fadeOutHandler=this.postFadeOut.bind(this);},resetPosition:function(){},show:function(){if(this.el===null){return;}
this.stopFade();this.resetPosition();Util.DOM.setStyle(this.el,'opacity',this.settings.opacity);Util.DOM.show(this.el);this.postShow();},postShow:function(){this.addEventListeners();this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onShow);},fadeIn:function(){if(this.el===null){return;}
Util.DOM.setStyle(this.el,'opacity',0);this.fadeInFromCurrentOpacity();},fadeInFromCurrentOpacity:function(){if(this.el===null){return;}
this.stopFade();this.isFading=true;this.resetPosition();Util.DOM.show(this.el);Util.Animation.fadeIn(this.el,this.settings.opacity,this.settings.fadeSpeed,this.fadeInHandler);},postFadeIn:function(e){this.isFading=false;this.addEventListeners();this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onFadeIn);},hide:function(){if(this.el===null){return;}
this.stopFade();Util.DOM.hide(this.el);this.postHide();},postHide:function(){this.removeEventListeners();this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onHide);},fadeOut:function(){this.stopFade();this.isFading=true;Util.Animation.fadeOut(this.el,this.settings.fadeSpeed,this.fadeOutHandler);},postFadeOut:function(e){this.isFading=false;Util.DOM.hide(this.el);this.removeEventListeners();this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onFadeOut);},stopFade:function(){if(this.el===null){return;}
Util.Animation.stopFade(this.el);this.isFading=false;},addEventListeners:function(){},removeEventListeners:function(){}});Code.PhotoSwipe.ElementClass.EventTypes={onShow:'onShow',onHide:'onHide',onClick:'onClick',onFadeIn:'onFadeIn',onFadeOut:'onFadeOut'};})(Code.PhotoSwipe.Util);(function(Util){Code.PhotoSwipe.FullSizeImageClass=Code.PhotoSwipe.EventClass.extend({el:null,index:null,naturalWidth:null,naturalHeight:null,src:null,caption:null,scaleMethod:null,isLandscape:null,isLoading:null,hasLoaded:null,loadEventHandler:null,init:function(index,scaleMethod,src,caption){this._super();this.index=index;this.naturalWidth=0;this.naturalHeight=0;this.src=src;this.caption=caption;this.isLandscape=false;this.isLoading=false;this.hasLoaded=false;this.scaleMethod=scaleMethod;this.loadEventHandler=this.onLoad.bind(this);},load:function(){this.isLoading=true;this.el=new Image();Util.DOM.addClass(this.el,'ps-full-size-image');this.el.onload=this.loadEventHandler;this.el.src=this.src;},onLoad:function(){this.naturalWidth=Util.coalesce(this.el.naturalWidth,this.el.width);this.naturalHeight=Util.coalesce(this.el.naturalHeight,this.el.height);this.isLandscape=(this.naturalWidth>this.naturalHeight);this.isLoading=false;this.hasLoaded=true;this.dispatchEvent(Code.PhotoSwipe.FullSizeImageClass.EventTypes.onLoad);}});Code.PhotoSwipe.FullSizeImageClass.EventTypes={onLoad:'onLoad'};})(Code.PhotoSwipe.Util);(function(Util){Code.PhotoSwipe.DocumentOverlayClass=Code.PhotoSwipe.ElementClass.extend({init:function(options){this._super(options);this.el=Util.DOM.createElement('div',{'class':Code.PhotoSwipe.DocumentOverlayClass.CssClasses.documentOverlay},'');Util.DOM.setStyle(this.el,{left:0,position:'absolute',top:0});Util.DOM.hide(this.el);Util.DOM.appendToBody(this.el);},resetPosition:function(){Util.DOM.width(this.el,Util.DOM.bodyWidth());Util.DOM.height(this.el,Util.DOM.bodyHeight());}});Code.PhotoSwipe.DocumentOverlayClass.CssClasses={documentOverlay:'ps-document-overlay'};})(Code.PhotoSwipe.Util);(function(Util){Code.PhotoSwipe.ViewportClass=Code.PhotoSwipe.ElementClass.extend({touchStartPoint:null,touchFingerCount:null,touchCancelsMouseEvents:null,touchStartHandler:null,touchMoveHandler:null,touchEndHandler:null,mouseDownHandler:null,mouseUpHandler:null,init:function(options){this.settings={swipeThreshold:500};Util.extend(this.settings,options);this._super(this.settings);this.touchFingerCount=0;this.touchStartPoint={x:0,y:0};this.touchCancelsMouseEvents=false;this.touchStartHandler=this.onTouchStart.bind(this);this.touchMoveHandler=this.onTouchMove.bind(this);this.touchEndHandler=this.onTouchEnd.bind(this);this.mouseDownHandler=this.onMouseDown.bind(this);this.mouseUpHandler=this.onMouseUp.bind(this);this.el=Util.DOM.createElement('div',{'class':Code.PhotoSwipe.ViewportClass.CssClasses.viewport},'');Util.DOM.setStyle(this.el,{position:'absolute',left:0,overflow:'hidden'});Util.DOM.hide(this.el);Util.DOM.appendToBody(this.el);},resetPosition:function(){Util.DOM.setStyle(this.el,{top:Util.DOM.windowScrollTop()+'px'});Util.DOM.width(this.el,Util.DOM.bodyWidth());Util.DOM.height(this.el,Util.DOM.windowHeight());},addEventListeners:function(){try{Util.DOM.addEventListener(this.el,'touchstart',this.touchStartHandler);Util.DOM.addEventListener(this.el,'touchmove',this.touchMoveHandler);Util.DOM.addEventListener(this.el,'touchend',this.touchEndHandler);}
catch(err){}
Util.DOM.addEventListener(this.el,'mousedown',this.mouseDownHandler);Util.DOM.addEventListener(this.el,'mouseup',this.mouseUpHandler);},removeEventListeners:function(){try{Util.DOM.removeEventListener(this.el,'touchstart',this.touchStartHandler);Util.DOM.removeEventListener(this.el,'touchmove',this.touchMoveHandler);Util.DOM.removeEventListener(this.el,'touchend',this.touchEndHandler);}
catch(err){}
Util.DOM.removeEventListener(this.el,'mousedown',this.mouseDownHandler);Util.DOM.removeEventListener(this.el,'mouseup',this.mouseUpHandler);},setCurrentTouchPoint:function(touchPoint,touches){this.touchFingerCount=touches.length;if(this.touchFingerCount===1){touchPoint.x=touches[0].pageX;touchPoint.y=touches[0].pageY;}
else{this.touchFingerCount=0;touchPoint.x=0;touchPoint.y=0;}},onTouchStart:function(e){e.preventDefault();this.setCurrentTouchPoint(this.touchStartPoint,Util.DOM.getTouchEvent(e).touches);},onTouchMove:function(e){e.preventDefault();},onTouchEnd:function(e){e.preventDefault();var touchEndPoint={x:0,y:0};var touchEvent=Util.DOM.getTouchEvent(e);if(!Util.isNothing(touchEvent.changedTouches)){this.setCurrentTouchPoint(touchEndPoint,touchEvent.changedTouches);}
else{this.setCurrentTouchPoint(touchEndPoint,touchEvent.touches);}
if(this.touchFingerCount==1){this.fireTouchEvent(this.touchStartPoint,touchEndPoint);}},onMouseDown:function(e){e.preventDefault();if(this.touchCancelsMouseEvents){return;}
this.touchStartPoint=Util.DOM.getMousePosition(e);},onMouseUp:function(e){e.preventDefault();if(this.touchCancelsMouseEvents){return;}
this.fireTouchEvent(this.touchStartPoint,Util.DOM.getMousePosition(e));},fireTouchEvent:function(touchStartPoint,touchEndPoint){var action;var distance=touchEndPoint.x-touchStartPoint.x;if(Math.abs(distance)>=this.settings.swipeThreshold){if(distance<0){action=Code.PhotoSwipe.ViewportClass.Actions.swipeLeft;}
else{action=Code.PhotoSwipe.ViewportClass.Actions.swipeRight;}}
else{action=Code.PhotoSwipe.ViewportClass.Actions.click;}
if(Util.isNothing(action)){return;}
this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:action});}});Code.PhotoSwipe.ViewportClass.CssClasses={viewport:'ps-viewport'};Code.PhotoSwipe.ViewportClass.Actions={click:'click',swipeLeft:'swipeLeft',swipeRight:'swipeRight'};Code.PhotoSwipe.ViewportClass.EventTypes={onTouch:'onTouch'};})(Code.PhotoSwipe.Util);(function(Util,FullSizeImageClass){Code.PhotoSwipe.SliderItemClass=Code.PhotoSwipe.EventClass.extend({el:null,imageEl:null,parentEl:null,fullSizeImage:null,fullSizeImageLoadEventHandler:null,init:function(parentEl){this._super();this.parentEl=parentEl;this.fullSizeImageLoadEventHandler=this.onFullSizeImageLoad.bind(this);this.el=Util.DOM.createElement('div',{'class':Code.PhotoSwipe.SliderItemClass.CssClasses.item+' '+Code.PhotoSwipe.SliderItemClass.CssClasses.loading},'');Util.DOM.setStyle(this.el,{position:'absolute',top:0});Util.DOM.resetTranslate(this.el);Util.DOM.appendChild(this.el,this.parentEl);this.imageEl=new Image();Util.DOM.setStyle(this.imageEl,{display:'block',position:'absolute',margin:0,padding:0});Util.DOM.hide(this.imageEl);Util.DOM.appendChild(this.imageEl,this.el);},resetPosition:function(width,height,xPos){Util.DOM.width(this.el,width);Util.DOM.height(this.el,height);Util.DOM.setStyle(this.el,'left',xPos+'px');this.resetImagePosition();},resetImagePosition:function(){if(Util.isNothing(this.fullSizeImage)){return;}
var src=Util.DOM.getAttribute(this.imageEl,'src');var
scale,newWidth,newHeight,newTop,newLeft,maxWidth=Util.DOM.width(this.el),maxHeight=Util.DOM.height(this.el);if(this.fullSizeImage.isLandscape){scale=maxWidth/this.fullSizeImage.naturalWidth;}
else{scale=maxHeight/this.fullSizeImage.naturalHeight;}
newWidth=Math.round(this.fullSizeImage.naturalWidth*scale);newHeight=Math.round(this.fullSizeImage.naturalHeight*scale);if(this.fullSizeImage.scaleMethod==='fit'){scale=1;if(newWidth>maxWidth){scale=maxWidth/newWidth;}
else if(newHeight>maxHeight){scale=maxHeight/newHeight;}
if(scale!==1){newWidth=Math.round(newWidth*scale);newHeight=Math.round(newHeight*scale);}}
newTop=((maxHeight-newHeight)/2)+'px';newLeft=((maxWidth-newWidth)/2)+'px';Util.DOM.width(this.imageEl,newWidth);Util.DOM.height(this.imageEl,newHeight);Util.DOM.setStyle(this.imageEl,{top:newTop,left:newLeft});Util.DOM.show(this.imageEl);},setFullSizeImage:function(fullSizeImage){this.fullSizeImage=fullSizeImage;Util.DOM.removeClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.loading);Util.DOM.removeClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.imageError);if(Util.isNothing(this.fullSizeImage)){this.fullSizeImage=null;Util.DOM.addClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.imageError);this.hideImage();return;}
if(!this.fullSizeImage.hasLoaded){Util.DOM.addClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.loading);this.hideImage();if(!this.fullSizeImage.isLoading){this.fullSizeImage.addEventListener(FullSizeImageClass.EventTypes.onLoad,this.fullSizeImageLoadEventHandler);this.fullSizeImage.load();}
return;}
Util.DOM.setAttribute(this.imageEl,'src',this.fullSizeImage.src);this.resetImagePosition();this.dispatchEvent(Code.PhotoSwipe.SliderItemClass.EventTypes.onFullSizeImageDisplay);},onFullSizeImageLoad:function(e){e.target.removeEventListener(FullSizeImageClass.EventTypes.onLoad,this.fullSizeImageLoadEventHandler);if(Util.isNothing(this.fullSizeImage)||e.target.index!==this.fullSizeImage.index){this.dispatchEvent({type:Code.PhotoSwipe.SliderItemClass.EventTypes.onFullSizeImageLoadAnomaly,target:this,fullSizeImage:e.target});}
else{this.setFullSizeImage(e.target);}},hideImage:function(){Util.DOM.removeAttribute(this.imageEl,'src');Util.DOM.hide(this.imageEl);}});Code.PhotoSwipe.SliderItemClass.CssClasses={item:'ps-slider-item',loading:'ps-slider-item-loading',imageError:'ps-slider-item-image-error'};Code.PhotoSwipe.SliderItemClass.EventTypes={onFullSizeImageDisplay:'onFullSizeImageDisplay',onFullSizeImageLoadAnomaly:'onFullSizeImageLoadAnomaly'};})(Code.PhotoSwipe.Util,Code.PhotoSwipe.FullSizeImageClass);(function(Util,SliderItemClass){Code.PhotoSwipe.SliderClass=Code.PhotoSwipe.ElementClass.extend({parentEl:null,parentElWidth:null,parentElHeight:null,items:null,previousItem:null,currentItem:null,nextItem:null,hasBounced:null,lastShowAction:null,bounceSlideBy:null,showNextEndEventHandler:null,showPreviousEndEventHandler:null,bounceStepOneEventHandler:null,bounceStepTwoEventHandler:null,sliderFullSizeImageLoadAnomalyEventHandler:null,init:function(options,parentEl){this.settings={slideSpeed:250};Util.extend(this.settings,options);this._super(this.settings);this.parentEl=parentEl;this.hasBounced=false;this.showNextEndEventHandler=this.onShowNextEnd.bind(this);this.showPreviousEndEventHandler=this.onShowPreviousEnd.bind(this);this.bounceStepOneEventHandler=this.onBounceStepOne.bind(this);this.bounceStepTwoEventHandler=this.onBounceStepTwo.bind(this);this.sliderFullSizeImageLoadAnomalyEventHandler=this.onSliderFullSizeImageLoadAnomaly.bind(this);this.el=Util.DOM.createElement('div',{'class':Code.PhotoSwipe.SliderClass.CssClasses.slider},'');Util.DOM.setStyle(this.el,{position:'absolute',top:0});Util.DOM.hide(this.el);Util.DOM.appendChild(this.el,parentEl);this.items=[];this.items.push(new SliderItemClass(this.el));this.items.push(new SliderItemClass(this.el));this.items.push(new SliderItemClass(this.el));this.previousItem=this.items[0];this.currentItem=this.items[1];this.nextItem=this.items[2];},addEventListeners:function(){for(var i=0;i<this.items.length;i++){var item=this.items[i];item.addEventListener(SliderItemClass.EventTypes.onFullSizeImageLoadAnomaly,this.sliderFullSizeImageLoadAnomalyEventHandler);}},removeEventListeners:function(){for(var i=0;i<this.items.length;i++){var item=this.items[i];item.removeEventListener(SliderItemClass.EventTypes.onFullSizeImageLoadAnomaly,this.sliderFullSizeImageLoadAnomalyEventHandler);}},resetPosition:function(){this.parentElWidth=Util.DOM.width(this.parentEl);this.parentElHeight=Util.DOM.height(this.parentEl);Util.DOM.width(this.el,this.parentElWidth*3);Util.DOM.height(this.el,this.parentElHeight);this.previousItem.resetPosition(this.parentElWidth,this.parentElHeight,0);this.currentItem.resetPosition(this.parentElWidth,this.parentElHeight,this.parentElWidth);this.nextItem.resetPosition(this.parentElWidth,this.parentElHeight,this.parentElWidth*2);this.center();},center:function(){Util.DOM.resetTranslate(this.el);Util.DOM.setStyle(this.el,{left:(this.parentElWidth*-1)+'px'});},setCurrentFullSizeImage:function(currentFullSizeImage){this.currentItem.setFullSizeImage(currentFullSizeImage);this.dispatchDisplayCurrentFullSizeImage();},setPreviousAndNextFullSizeImages:function(previousFullSizeImage,nextFullSizeImage){this.nextItem.setFullSizeImage(nextFullSizeImage);this.previousItem.setFullSizeImage(previousFullSizeImage);},showNext:function(){this.lastShowAction=Code.PhotoSwipe.SliderClass.ShowActionTypes.next;this.hasBounced=false;if(Util.isNothing(this.nextItem.fullSizeImage)){this.bounce();return;}
var slideBy=this.parentElWidth*-1;Util.Animation.slideBy(this.el,slideBy,0,this.settings.slideSpeed,this.showNextEndEventHandler);},showPrevious:function(){this.lastShowAction=Code.PhotoSwipe.SliderClass.ShowActionTypes.previous;this.hasBounced=false;if(Util.isNothing(this.previousItem.fullSizeImage)){this.bounce();return;}
var slideBy=this.parentElWidth;Util.Animation.slideBy(this.el,slideBy,0,this.settings.slideSpeed,this.showPreviousEndEventHandler);},bounce:function(){this.hasBounced=true;this.bounceSlideBy=this.parentElWidth/2;Util.Animation.slideBy(this.el,(this.lastShowAction===Code.PhotoSwipe.SliderClass.ShowActionTypes.previous)?this.bounceSlideBy:this.bounceSlideBy*-1,0,this.settings.slideSpeed,this.bounceStepOneEventHandler);},onBounceStepOne:function(e){Util.Animation.slideBy(this.el,(this.lastShowAction===Code.PhotoSwipe.SliderClass.ShowActionTypes.previous)?this.bounceSlideBy*-1:this.bounceSlideBy,0,this.settings.slideSpeed,this.bounceStepTwoEventHandler);},onBounceStepTwo:function(e){this.dispatchDisplayCurrentFullSizeImage();},onShowNextEnd:function(){Util.swapArrayElements(this.items,1,2);this.currentItem=this.items[1];this.nextItem=this.items[2];var parentElWidth=this.parentElWidth;Util.DOM.setStyle(this.currentItem.el,'left',parentElWidth+'px');Util.DOM.setStyle(this.nextItem.el,'left',(parentElWidth*2)+'px');this.center();this.dispatchDisplayCurrentFullSizeImage();},onShowPreviousEnd:function(){Util.swapArrayElements(this.items,1,0);this.currentItem=this.items[1];this.previousItem=this.items[0];Util.DOM.setStyle(this.currentItem.el,'left',this.parentElWidth+'px');Util.DOM.setStyle(this.previousItem.el,'left','0px');this.center();this.dispatchDisplayCurrentFullSizeImage();},onSliderFullSizeImageLoadAnomaly:function(e){var fullSizeImage=e.fullSizeImage;if(!Util.isNothing(this.currentItem.fullSizeImage)){if(this.currentItem.fullSizeImage.index===fullSizeImage.index){this.currentItem.setFullSizeImage(fullSizeImage);this.dispatchDisplayCurrentFullSizeImage();return;}}
if(!Util.isNothing(this.nextItem.fullSizeImage)){if(this.nextItem.fullSizeImage.index===fullSizeImage.index){this.nextItem.setFullSizeImage(fullSizeImage);return;}}
if(!Util.isNothing(this.previousItem.fullSizeImage)){if(this.previousItem.fullSizeImage.index===fullSizeImage.index){this.previousItem.setFullSizeImage(fullSizeImage);return;}}},dispatchDisplayCurrentFullSizeImage:function(){this.dispatchEvent({type:Code.PhotoSwipe.SliderClass.EventTypes.onDisplayCurrentFullSizeImage,target:this,fullSizeImage:this.currentItem.fullSizeImage});}});Code.PhotoSwipe.SliderClass.CssClasses={slider:'ps-slider'};Code.PhotoSwipe.SliderClass.ShowActionTypes={next:'next',previous:'previous'};Code.PhotoSwipe.SliderClass.EventTypes={onDisplayCurrentFullSizeImage:'onDisplayCurrentFullSizeImage'};})(Code.PhotoSwipe.Util,Code.PhotoSwipe.SliderItemClass);(function(Util){Code.PhotoSwipe.CaptionClass=Code.PhotoSwipe.ElementClass.extend({contentEl:null,fadeOutTimeout:null,touchStartHandler:null,init:function(options){this.settings={captionDelay:4000,position:'bottom'};Util.extend(this.settings,options);this._super(options);this.touchStartHandler=this.onTouchStart.bind(this);var cssClass=Code.PhotoSwipe.CaptionClass.CssClasses.caption;if(this.settings.position==='bottom'){cssClass=cssClass+' '+Code.PhotoSwipe.CaptionClass.CssClasses.bottom;}
this.el=Util.DOM.createElement('div',{'class':cssClass},'');Util.DOM.setStyle(this.el,{left:0,position:'absolute',overflow:'hidden',zIndex:1000});Util.DOM.hide(this.el);Util.DOM.appendToBody(this.el);this.contentEl=Util.DOM.createElement('div',{'class':Code.PhotoSwipe.CaptionClass.CssClasses.content},'');Util.DOM.appendChild(this.contentEl,this.el);},addEventListeners:function(){try{Util.DOM.addEventListener(this.el,'touchstart',this.touchStartHandler);}
catch(err){}},removeEventListeners:function(){try{Util.DOM.removeEventListener(this.el,'touchstart',this.touchStartHandler);}
catch(err){}},onTouchStart:function(e){e.preventDefault();},resetPosition:function(){var top;if(this.settings.position==='bottom'){top=Util.DOM.windowHeight()-Util.DOM.height(this.el)+Util.DOM.windowScrollTop();}
else{top=Util.DOM.windowScrollTop();}
Util.DOM.setStyle(this.el,'top',top+'px');Util.DOM.width(this.el,Util.DOM.bodyWidth());},show:function(captionValue){this.stopFade();Util.DOM.removeChildren(this.contentEl);captionValue=Util.coalesce(captionValue,'\u00A0');if(Util.isObject(captionValue)){Util.DOM.appendChild(captionValue,this.contentEl);}
else{if(captionValue===''){captionValue='\u00A0';}
Util.DOM.appendText(captionValue,this.contentEl);}
Util.DOM.setStyle(this.el,'opacity',this.settings.opacity);Util.DOM.show(this.el);this.resetPosition();this.postShow();},setEmptyCaption:function(){Util.DOM.removeChildren(this.contentEl);Util.DOM.appendText('\u00A0',this.contentEl);},stopFade:function(){window.clearTimeout(this.fadeOutTimeout);this._super();},postShow:function(){if(this.settings.captionDelay>0){this.fadeOutTimeout=window.setTimeout(this.fadeOut.bind(this),this.settings.captionDelay);}
this._super();}});Code.PhotoSwipe.CaptionClass.CssClasses={caption:'ps-caption',bottom:'ps-caption-bottom',content:'ps-caption-content'};})(Code.PhotoSwipe.Util);(function(Util){Code.PhotoSwipe.ToolbarClass=Code.PhotoSwipe.ElementClass.extend({closeEl:null,previousEl:null,nextEl:null,playEl:null,clickHandler:null,fadeOutTimeout:null,isNextActive:null,isPreviousActive:null,init:function(options){this.settings={toolbarDelay:4000,position:'bottom'};Util.extend(this.settings,options);this._super(options);this.isNextActive=true;this.isPreviousActive=true;this.clickHandler=this.onClick.bind(this);var cssClass=Code.PhotoSwipe.ToolbarClass.CssClasses.caption;if(this.settings.position==='top'){cssClass=cssClass+' '+Code.PhotoSwipe.ToolbarClass.CssClasses.top;}
this.el=Util.DOM.createElement('div',{'class':cssClass},'');Util.DOM.setStyle(this.el,{left:0,position:'absolute',overflow:'hidden',zIndex:1001,display:'table'});Util.DOM.hide(this.el);Util.DOM.appendToBody(this.el);this.closeEl=Util.DOM.createElement('div',{'class':Code.PhotoSwipe.ToolbarClass.CssClasses.close},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>');Util.DOM.appendChild(this.closeEl,this.el);this.playEl=Util.DOM.createElement('div',{'class':Code.PhotoSwipe.ToolbarClass.CssClasses.play},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>');Util.DOM.appendChild(this.playEl,this.el);this.previousEl=Util.DOM.createElement('div',{'class':Code.PhotoSwipe.ToolbarClass.CssClasses.previous},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>');Util.DOM.appendChild(this.previousEl,this.el);this.nextEl=Util.DOM.createElement('div',{'class':Code.PhotoSwipe.ToolbarClass.CssClasses.next},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>');Util.DOM.appendChild(this.nextEl,this.el);},addEventListeners:function(){Util.DOM.addEventListener(this.el,'click',this.clickHandler);},removeEventListeners:function(){Util.DOM.removeEventListener(this.el,'click',this.clickHandler);},onClick:function(e){var action;switch(e.target.parentNode){case this.previousEl:if(this.isPreviousActive){action=Code.PhotoSwipe.ToolbarClass.Actions.previous;}
break;case this.nextEl:if(this.isNextActive){action=Code.PhotoSwipe.ToolbarClass.Actions.next;}
break;case this.playEl:action=Code.PhotoSwipe.ToolbarClass.Actions.play;break;case this.closeEl:action=Code.PhotoSwipe.ToolbarClass.Actions.close;break;}
if(Util.isNothing(action)){return;}
this.dispatchEvent({type:Code.PhotoSwipe.ToolbarClass.EventTypes.onClick,target:this,action:action});},resetPosition:function(){var top;if(this.settings.position==='bottom'){top=Util.DOM.windowHeight()-Util.DOM.height(this.el)+Util.DOM.windowScrollTop();}
else{top=Util.DOM.windowScrollTop();}
Util.DOM.setStyle(this.el,'top',top+'px');Util.DOM.width(this.el,Util.DOM.bodyWidth());},stopFade:function(){window.clearTimeout(this.fadeOutTimeout);this._super();},postShow:function(){if(this.settings.toolbarDelay>0){this.fadeOutTimeout=window.setTimeout(this.fadeOut.bind(this),this.settings.toolbarDelay);}
this._super();},setNextState:function(disable){if(disable){Util.DOM.addClass(this.nextEl,Code.PhotoSwipe.ToolbarClass.CssClasses.nextDisabled);this.isNextActive=false;}
else{Util.DOM.removeClass(this.nextEl,Code.PhotoSwipe.ToolbarClass.CssClasses.nextDisabled);this.isNextActive=true;}},setPreviousState:function(disable){if(disable){Util.DOM.addClass(this.previousEl,Code.PhotoSwipe.ToolbarClass.CssClasses.previousDisabled);this.isPreviousActive=false;}
else{Util.DOM.removeClass(this.previousEl,Code.PhotoSwipe.ToolbarClass.CssClasses.previousDisabled);this.isPreviousActive=true;}}});Code.PhotoSwipe.ToolbarClass.CssClasses={caption:'ps-toolbar',top:'ps-toolbar-top',close:'ps-toolbar-close',previous:'ps-toolbar-previous',previousDisabled:'ps-toolbar-previous-disabled',next:'ps-toolbar-next',nextDisabled:'ps-toolbar-next-disabled',play:'ps-toolbar-play',content:'ps-toolbar-content'};Code.PhotoSwipe.ToolbarClass.Actions={close:'close',previous:'previous',next:'next',play:'play'};Code.PhotoSwipe.ToolbarClass.EventTypes={onClick:'onClick'};})(Code.PhotoSwipe.Util);(function(Util,ElementClass,DocumentOverlayClass,FullSizeImageClass,ViewportClass,SliderClass,CaptionClass,ToolbarClass){var photoSwipe=Code.PhotoSwipe.EventClass.extend({fullSizeImages:null,documentOverlay:null,viewport:null,slider:null,caption:null,toolbar:null,settings:null,slideShowSettingsSaved:null,currentIndex:null,isBusy:null,slideshowTimeout:null,documentOverlayFadeInEventHandler:null,windowResizeEventHandler:null,windowOrientationChangeEventHandler:null,windowScrollEventHandler:null,keyDownEventHandler:null,viewportTouchEventHandler:null,viewportFadeOutEventHandler:null,sliderDisplayCurrentFullSizeImageEventHandler:null,toolbarClickEventHandler:null,init:function(){this._super();this.currentIndex=0;this.isBusy=false;this.settings={getImageSource:Code.PhotoSwipe.GetImageSource,getImageCaption:Code.PhotoSwipe.GetImageCaption,fadeSpeed:400,slideSpeed:250,swipeThreshold:50,loop:true,flipCaptionAndToolbar:false,captionDelay:3000,captionOpacity:0.8,hideCaption:false,showEmptyCaptions:true,toolbarDelay:3000,toolbarOpacity:0.8,hideToolbar:false,slideshowDelay:3000,imageScaleMethod:'fit'};this.documentOverlayFadeInEventHandler=this.onDocumentOverlayFadeIn.bind(this);this.windowResizeEventHandler=this.onWindowResize.bind(this);this.windowOrientationChangeEventHandler=this.onWindowOrientationChange.bind(this);this.windowScrollEventHandler=this.onWindowScroll.bind(this);this.keyDownEventHandler=this.onKeyDown.bind(this);this.viewportTouchEventHandler=this.onViewportTouch.bind(this);this.viewportFadeOutEventHandler=this.onViewportFadeOut.bind(this);this.sliderDisplayCurrentFullSizeImageEventHandler=this.onSliderDisplayCurrentFullSizeImage.bind(this);this.toolbarClickEventHandler=this.onToolbarClick.bind(this);},setOptions:function(options){Util.extend(this.settings,options);},setImages:function(thumbEls){if(!Util.isArray){throw"thumbEls is not an array";}
this.currentIndex=0;this.fullSizeImages=[];for(var i=0;i<thumbEls.length;i++){var thumbEl=thumbEls[i];var fullSizeImage=new FullSizeImageClass(i,this.settings.imageScaleMethod,this.settings.getImageSource(thumbEl),this.settings.getImageCaption(thumbEl));this.fullSizeImages.push(fullSizeImage);}},show:function(startingIndex){if(this.isBusy){return;}
if(!Util.isNumber(startingIndex)){throw"startingIndex must be a number";}
if(Util.isNothing(this.fullSizeImages)){throw"need to set images before showing the gallery";}
this.isBusy=true;Util.DOM.addClass(document.body,Code.PhotoSwipe.CssClasses.activeBody);startingIndex=window.parseInt(startingIndex);if(startingIndex<0||startingIndex>=this.fullSizeImages.length){startingIndex=0;}
this.currentIndex=startingIndex;if(Util.isNothing(this.documentOverlay)){this.build();}
this.documentOverlay.addEventListener(ElementClass.EventTypes.onFadeIn,this.documentOverlayFadeInEventHandler);this.documentOverlay.fadeIn();},build:function(){this.documentOverlay=new DocumentOverlayClass({opacity:1,fadeSpeed:this.settings.fadeSpeed});this.viewport=new ViewportClass({opacity:1,fadeSpeed:this.settings.fadeSpeed,swipeThreshold:this.settings.swipeThreshold});this.slider=new SliderClass({opacity:1,fadeSpeed:this.settings.fadeSpeed,slideSpeed:this.settings.slideSpeed},this.viewport.el);this.caption=new CaptionClass({opacity:this.settings.captionOpacity,fadeSpeed:this.settings.fadeSpeed,captionDelay:this.settings.captionDelay,position:(this.settings.flipCaptionAndToolbar)?'bottom':'top'});this.toolbar=new ToolbarClass({opacity:this.settings.toolbarOpacity,fadeSpeed:this.settings.fadeSpeed,toolbarDelay:this.settings.toolbarDelay,position:(this.settings.flipCaptionAndToolbar)?'top':'bottom'});},addEventListeners:function(){if(!Util.isNothing(window.orientation)){Util.DOM.addEventListener(window,'orientationchange',this.windowOrientationChangeEventHandler);}
Util.DOM.addEventListener(window,'resize',this.windowResizeEventHandler);Util.DOM.addEventListener(window,'scroll',this.windowScrollEventHandler);Util.DOM.addEventListener(document,'keydown',this.keyDownEventHandler);this.viewport.addEventListener(ViewportClass.EventTypes.onTouch,this.viewportTouchEventHandler);this.slider.addEventListener(SliderClass.EventTypes.onDisplayCurrentFullSizeImage,this.sliderDisplayCurrentFullSizeImageEventHandler);this.toolbar.addEventListener(ToolbarClass.EventTypes.onClick,this.toolbarClickEventHandler);},removeEventListeners:function(){if(!Util.isNothing(window.orientation)){Util.DOM.removeEventListener(window,'orientationchange',this.windowOrientationChangeEventHandler);}
Util.DOM.removeEventListener(window,'resize',this.windowResizeEventHandler);Util.DOM.removeEventListener(window,'scroll',this.windowScrollEventHandler);Util.DOM.removeEventListener(document,'keydown',this.keyDownEventHandler);this.viewport.removeEventListener(ViewportClass.EventTypes.onTouch,this.viewportTouchEventHandler);this.slider.removeEventListener(SliderClass.EventTypes.onDisplayCurrentFullSizeImage,this.sliderDisplayCurrentFullSizeImageEventHandler);this.toolbar.removeEventListener(ToolbarClass.EventTypes.onClick,this.toolbarClickEventHandler);},onDocumentOverlayFadeIn:function(e){this.documentOverlay.removeEventListener(ElementClass.EventTypes.onFadeIn,this.documentOverlayFadeInEventHandler);this.viewport.show();this.slider.show();this.toolbar.show();this.addEventListeners();this.slider.setCurrentFullSizeImage(this.fullSizeImages[this.currentIndex]);this.isBusy=false;},setSliderPreviousAndNextFullSizeImages:function(){var
lastIndex,previousFullSizeImage=null,nextFullSizeImage=null;if(this.fullSizeImages.length>1){lastIndex=this.fullSizeImages.length-1;if(this.currentIndex===lastIndex){if(this.settings.loop){nextFullSizeImage=this.fullSizeImages[0];}
previousFullSizeImage=this.fullSizeImages[this.currentIndex-1];}
else if(this.currentIndex===0){nextFullSizeImage=this.fullSizeImages[this.currentIndex+1];if(this.settings.loop){previousFullSizeImage=this.fullSizeImages[lastIndex];}}
else{nextFullSizeImage=this.fullSizeImages[this.currentIndex+1];previousFullSizeImage=this.fullSizeImages[this.currentIndex-1];}}
this.slider.setPreviousAndNextFullSizeImages(previousFullSizeImage,nextFullSizeImage);},onWindowResize:function(e){this.resetPosition();},onKeyDown:function(e){if(e.keyCode===37){e.preventDefault();this.showPrevious();}
else if(e.keyCode===39){e.preventDefault();this.showNext();}
else if(e.keyCode===38||e.keyCode===40){e.preventDefault();}
else if(e.keyCode===27){e.preventDefault();this.hide();}
else if(e.keyCode===32){e.preventDefault();}},onWindowOrientationChange:function(e){this.resetPosition();},onWindowScroll:function(e){this.resetPosition();},resetPosition:function(){if(this.isBusy){return;}
this.documentOverlay.resetPosition();this.viewport.resetPosition();this.slider.resetPosition();this.caption.resetPosition();this.toolbar.resetPosition();},onViewportTouch:function(e){switch(e.action){case ViewportClass.Actions.swipeLeft:this.showNext();break;case ViewportClass.Actions.swipeRight:this.showPrevious();break;default:if(this.isSlideShowActive()||!this.settings.hideToolbar){this.showCaptionAndToolbar();}
else{this.hide();}
break;}},onViewportFadeOut:function(e){this.viewport.removeEventListener(ElementClass.EventTypes.onFadeOut,this.viewportFadeOutEventHandler);this.isBusy=false;},hide:function(){if(this.isBusy){return;}
this.isBusy=true;this.removeEventListeners();this.documentOverlay.hide();this.caption.hide();this.toolbar.hide();this.slider.hide();Util.DOM.removeClass(document.body,Code.PhotoSwipe.CssClasses.activeBody);this.viewport.addEventListener(ElementClass.EventTypes.onFadeOut,this.viewportFadeOutEventHandler);this.viewport.fadeOut();},showNext:function(){if(this.isBusy){return;}
this.isBusy=true;this.caption.setEmptyCaption();this.slider.showNext();},showPrevious:function(){if(this.isBusy){return;}
this.isBusy=true;this.caption.setEmptyCaption();this.slider.showPrevious();},onSliderDisplayCurrentFullSizeImage:function(e){this.currentIndex=e.fullSizeImage.index;this.setSliderPreviousAndNextFullSizeImages();this.isBusy=false;if(this.isSlideShowActive()){if(!this.settings.loop&&this.currentIndex===this.fullSizeImages.length-1){this.slideshowTimeout=window.setTimeout(this.showCaptionAndToolbar.bind(this),this.settings.slideshowDelay);}
else{this.fireSlideshowTimeout();}}
else{this.showCaptionAndToolbar();}},showCaptionAndToolbar:function(captionValue){this.stopSlideshow();if(this.settings.hideCaption){this.caption.hide();}
else{captionValue=Util.coalesce(captionValue,this.fullSizeImages[this.currentIndex].caption);if((Util.isNothing(captionValue)||captionValue==='')&&!this.settings.showEmptyCaptions){this.caption.hide();return;}
this.caption.show(captionValue);}
if(this.settings.hideToolbar){this.toolbar.hide();}
else{if(this.settings.loop){this.toolbar.setNextState(false);this.toolbar.setPreviousState(false);}
else{if(this.currentIndex>=this.fullSizeImages.length-1){this.toolbar.setNextState(true);}
else{this.toolbar.setNextState(false);}
if(this.currentIndex<1){this.toolbar.setPreviousState(true);}
else{this.toolbar.setPreviousState(false);}}
this.toolbar.show();}},onToolbarClick:function(e){switch(e.action){case ToolbarClass.Actions.previous:this.showPrevious();break;case ToolbarClass.Actions.next:this.showNext();break;case ToolbarClass.Actions.play:this.startSlideshow();break;default:this.hide();break;}},startSlideshow:function(){if(this.isBusy){return;}
window.clearTimeout(this.slideshowTimeout);this.slideShowSettingsSaved={hideCaption:this.settings.hideCaption,hideToolbar:this.settings.hideToolbar};this.settings.hideCaption=true;this.settings.hideToolbar=true;this.caption.fadeOut();this.toolbar.fadeOut();this.fireSlideshowTimeout();},stopSlideshow:function(){if(!this.isSlideShowActive()){return;}
window.clearTimeout(this.slideshowTimeout);this.settings.hideCaption=this.slideShowSettingsSaved.hideCaption;this.settings.hideToolbar=this.slideShowSettingsSaved.hideToolbar;this.slideShowSettingsSaved=null;},isSlideShowActive:function(){return(!Util.isNothing(this.slideShowSettingsSaved));},fireSlideshowTimeout:function(){this.slideshowTimeout=window.setTimeout(this.showNext.bind(this),this.settings.slideshowDelay);}});Code.PhotoSwipe.CssClasses={activeBody:'ps-active'};Code.PhotoSwipe.GetImageSource=function(el){return el.href;};Code.PhotoSwipe.GetImageCaption=function(el){if(el.nodeName==="IMG"){return Util.DOM.getAttribute(el,'alt');}
return Util.DOM.getAttribute(el.firstChild,'alt');};Code.PhotoSwipe.Current=new photoSwipe();Code.photoSwipe=function(thumbEls,containerEl,opts){var useEventDelegation=true;if(Util.isNothing(thumbEls)){return;}
if(Util.isNothing(containerEl)){containerEl=document.documentElement;useEventDelegation=false;}
if(Util.isString(containerEl)){containerEl=document.documentElement.querySelector(containerEl);}
if(Util.isNothing(containerEl)){throw'Unable to find container element';}
if(Util.isString(thumbEls)){thumbEls=containerEl.querySelectorAll(thumbEls);}
if(Util.isNothing(thumbEls)){return;}
Code.PhotoSwipe.Current.setOptions(opts);Code.PhotoSwipe.Current.setImages(thumbEls);if(useEventDelegation){containerEl.addEventListener('click',function(e){if(e.target===e.currentTarget){return;}
e.preventDefault();var findNode=function(clickedEl,targetNodeName,stopAtEl){if(Util.isNothing(clickedEl)||Util.isNothing(targetNodeName)||Util.isNothing(stopAtEl)){return null;}
if(clickedEl.nodeName===targetNodeName){return clickedEl;}
if(clickedEl===stopAtEl){return null;}
return findNode(clickedEl.parentNode,targetNodeName,stopAtEl)};var clickedEl=findNode(e.target,thumbEls[0].nodeName,e.currentTarget);if(Util.isNothing(clickedEl)){return;}
showPhotoSwipe(clickedEl);},false);}
else{for(var i=0;i<thumbEls.length;i++){var thumbEl=thumbEls[i];thumbEl.addEventListener('click',function(e){e.preventDefault();showPhotoSwipe(e.currentTarget);},false);}}
var showPhotoSwipe=function(clickedEl){var startingIndex=0;for(startingIndex;startingIndex<thumbEls.length;startingIndex++){if(thumbEls[startingIndex]===clickedEl){break;}}
Code.PhotoSwipe.Current.show(startingIndex);};};if(!Util.isNothing(window.jQuery)){window.jQuery.fn.photoSwipe=function(opts){var thumbEls=this;Code.PhotoSwipe.Current.setOptions(opts);Code.PhotoSwipe.Current.setImages(thumbEls);$(thumbEls).live('click',function(e){e.preventDefault();var startingIndex=$(thumbEls).index($(e.currentTarget));Code.PhotoSwipe.Current.show(startingIndex);});};}})
(Code.PhotoSwipe.Util,Code.PhotoSwipe.ElementClass,Code.PhotoSwipe.DocumentOverlayClass,Code.PhotoSwipe.FullSizeImageClass,Code.PhotoSwipe.ViewportClass,Code.PhotoSwipe.SliderClass,Code.PhotoSwipe.CaptionClass,Code.PhotoSwipe.ToolbarClass);